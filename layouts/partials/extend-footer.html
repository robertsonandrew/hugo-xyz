<!-- Custom Features: Logo Gradient Switcher, Quote Banner Controls, Status Dot -->
{{- partial "custom-features.html" . -}}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const statusLink = document.getElementById('status-link');
    const copyrightP = document.querySelector('#site-footer p:first-child');
    const reopenWrapper = document.getElementById('reopen-quote-banner-wrapper');
    
    if (copyrightP) {
      // Place status dot first (appears immediately after the name)
      if (statusLink) {
        copyrightP.appendChild(statusLink);
        statusLink.style.display = 'inline-block';
      }
      // Place lightbulb after the status dot
      if (reopenWrapper) {
        copyrightP.appendChild(reopenWrapper);
      }
      // Logo gradient switcher has no visible control; only presets JSON is emitted
    }
  });
</script>

<!-- Quote Banner Assets: CSS loaded in head to avoid FOUC -->

{{ $quoteBannerJS := resources.Get "js/quote-banner.js" }}
{{ if $quoteBannerJS }}
  {{ $quoteBannerJS = $quoteBannerJS | js.Build | resources.Minify | resources.Fingerprint }}
  <script src="{{ $quoteBannerJS.RelPermalink }}" integrity="{{ $quoteBannerJS.Data.Integrity }}" defer></script>
{{ end }}


{{ $logoSwitcherJS := resources.Get "js/logo-gradient-switcher.js" }}
{{ if $logoSwitcherJS }}
  {{ $logoSwitcherJS = $logoSwitcherJS | js.Build | resources.Minify | resources.Fingerprint }}
  <script src="{{ $logoSwitcherJS.RelPermalink }}" integrity="{{ $logoSwitcherJS.Data.Integrity }}" defer></script>
{{ end }}